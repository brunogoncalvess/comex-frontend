import{u as m,D as p}from"./index-78858509.js";/* empty css              *//* empty css                   */class C{constructor(e){this.nome=e,this.nome=e}criaCategoria(){return{nome:this.nome,id:m.v4(),status:"ATIVA",data:p.data()}}}const g=document.querySelector(".categoria__btn"),c=document.querySelector(".table tbody");let n=document.querySelector(".categoria__input");window.addEventListener("load",()=>u());function f(t){fetch(`http://localhost:3000/categorias/${t}`,{method:"DELETE"}).then(()=>s())}function s(){for(;c.firstChild;)c.removeChild(c.firstChild);u()}function u(){fetch("http://localhost:3000/categorias").then(t=>t.json()).then(t=>t.forEach(e=>E(e))).catch(t=>{alert("Não foi possível recuperar as categorias."),console.log("fetchError::",t)})}function E(t){const e=document.createElement("tr"),l=document.createElement("td"),i=document.createElement("td"),o=document.createElement("td"),a=document.createElement("button"),d=document.createElement("button"),r=document.createElement("button");l.textContent=t.id,i.textContent=t.categoria,a.textContent="Deletar",d.textContent="Alterar",r.textContent="Desativar",a.classList.add("btn","btn-danger","me-2"),d.classList.add("btn","btn-warning","me-2"),r.classList.add("btn","btn-secondary","me-2"),a.addEventListener("click",()=>f(t.id)),o.appendChild(a),o.appendChild(d),o.appendChild(r),e.appendChild(l),e.appendChild(i),e.appendChild(o),c.appendChild(e)}const h=()=>{fetch("http://localhost:3000/categorias",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(new C(n.value).criaCategoria())}).then(t=>{t.status===201&&alert(`Categoria ${n.value} cadastrada com sucesso.`)}).then(()=>s()).catch(t=>console.log("fetch error::",t)),n.value="",n.focus()};g.addEventListener("click",()=>{h()});n.addEventListener("keydown",t=>t.code==="Enter"?h():null);
