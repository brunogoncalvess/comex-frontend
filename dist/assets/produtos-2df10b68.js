import{u as i,D as l}from"./index-78858509.js";/* empty css              *//* empty css                   */class s{constructor(t,o,a,c,r){this.nome=t,this.descricao=o,this.preco=a,this.estoque=c,this.categoria=r,this.nome=t,this.descricao=o,this.preco=a,this.estoque=c,this.categoria=r}criaProduto(){return{id:i.v4(),nome:this.nome,descricao:this.descricao,preco:this.preco,estoque:this.estoque,categoria:this.categoria,data:l.data()}}}const n=document.querySelector(".produto__btn"),u=document.querySelector("#categoria");window.onload=()=>{fetch("http://localhost:3000/categorias").then(e=>e.json()).then(e=>e.forEach(t=>d(t)))};function d(e){const t=document.createElement("option");t.classList.add("produto__select"),t.value=e.categoria,t.textContent=e.categoria,u.appendChild(t),u.value=""}n.onclick=()=>{let e=document.querySelector("#nome"),t=document.querySelector("#preco"),o=document.querySelector("#estoque"),a=document.querySelector("#descricao"),c=document.querySelector("#categoria");console.log(new s(e.value,a.value,+t.value,+o.value,c.value).criaProduto()),fetch("http://localhost:3000/produtos",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(new s(e.value,a.value,+t.value,+o.value,c.value).criaProduto())}).then(r=>{r.status===201&&(alert(`Produto ${e.value} cadastrado com sucesso.`),e.value=a.value=t.value=o.value=c.value="",e.focus())}).catch(r=>{alert("Não foi possível salvar o produto! Aguarde uns minutos e tente novamente"),console.log("fetchErr::",r)})};
